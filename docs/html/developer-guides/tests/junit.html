
<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Build Time Testing with JUnit &#8212; OpenDaylight Documentation Chromium documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.2/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/ribbon.css?v=cb953b18" />
    <link rel="stylesheet" href="../../_static/css/warning-header.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=7b4a4459"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="https://cdn.datatables.net/1.11.2/js/jquery.dataTables.min.js"></script>
    <script class="init" type="text/javascript">$(document).ready( function () { $('table.datatable').DataTable(); } );</script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Considerations on Tests" href="considerations.html" />
    <link rel="prev" title="Developer Test Guides" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body>
  <div class="ribbon">
    <a href="https://jira.opendaylight.org/secure/CreateIssueDetails!init.jspa
?pid=10121
&issuetype=10104
&components=10228
&priority=2
&description=version:+Chromium%0Apage:+developer-guides/tests/junit%0A%0A" target="_blank">
      Report Issue
    </a>
  </div>
  

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
  <!-- Outdated version warning banner -->
  
    <style>
      body {
        padding-top: 60px;
     }
    </style>
  
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          OpenDaylight Documentation</a>
        <span class="navbar-text navbar-version pull-left"><b>Chromium</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../downloads.html">OpenDaylight Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started-guide/index.html">Getting Started Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guides</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-process/index.html">OpenDaylight Release Process Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javadoc.html">Java API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/index.html">OpenDaylight User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor-guides/index.html">Contributor Guides</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Build Time Testing with JUnit</a><ul>
<li><a class="reference internal" href="#introduction-to-junit">Introduction to JUnit</a></li>
<li><a class="reference internal" href="#qualities-of-a-good-unit-test">Qualities of a Good Unit Test</a></li>
<li><a class="reference internal" href="#running-a-junit-test">Running a JUnit Test</a><ul>
<li><a class="reference internal" href="#command-line">Command Line</a></li>
<li><a class="reference internal" href="#eclipse">Eclipse</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-a-test">Debugging a Test</a></li>
<li><a class="reference internal" href="#example-implementation">Example Implementation</a><ul>
<li><a class="reference internal" href="#test-name-and-package">Test Name and Package</a></li>
<li><a class="reference internal" href="#adding-junit-to-your-maven-project">Adding JUnit to your Maven Project</a></li>
<li><a class="reference internal" href="#creating-your-test-class-annotations">Creating your Test Class - Annotations</a></li>
<li><a class="reference internal" href="#validating-your-tests-assertions">Validating Your Tests - Assertions</a></li>
<li><a class="reference internal" href="#concurrency-in-unit-test">Concurrency in Unit test</a></li>
<li><a class="reference internal" href="#mocking">Mocking</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Build Time Testing with JUnit</a><ul>
<li><a class="reference internal" href="#introduction-to-junit">Introduction to JUnit</a></li>
<li><a class="reference internal" href="#qualities-of-a-good-unit-test">Qualities of a Good Unit Test</a></li>
<li><a class="reference internal" href="#running-a-junit-test">Running a JUnit Test</a><ul>
<li><a class="reference internal" href="#command-line">Command Line</a></li>
<li><a class="reference internal" href="#eclipse">Eclipse</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-a-test">Debugging a Test</a></li>
<li><a class="reference internal" href="#example-implementation">Example Implementation</a><ul>
<li><a class="reference internal" href="#test-name-and-package">Test Name and Package</a></li>
<li><a class="reference internal" href="#adding-junit-to-your-maven-project">Adding JUnit to your Maven Project</a></li>
<li><a class="reference internal" href="#creating-your-test-class-annotations">Creating your Test Class - Annotations</a></li>
<li><a class="reference internal" href="#validating-your-tests-assertions">Validating Your Tests - Assertions</a></li>
<li><a class="reference internal" href="#concurrency-in-unit-test">Concurrency in Unit test</a></li>
<li><a class="reference internal" href="#mocking">Mocking</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<center>
<div class="btn-group" role="group" aria-label="...">
    
    <a class="btn btn-default" href="index.html">Prev Page</a>
    

    
    <a class="btn btn-default" href="considerations.html">Next Page</a>
    
</div>
</center>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <section id="build-time-testing-with-junit">
<h1>Build Time Testing with JUnit<a class="headerlink" href="#build-time-testing-with-junit" title="Link to this heading">¶</a></h1>
<section id="introduction-to-junit">
<h2>Introduction to JUnit<a class="headerlink" href="#introduction-to-junit" title="Link to this heading">¶</a></h2>
<p>JUnit is a framework for writing build time tests.
See their home page <a class="reference external" href="http://junit.org/">http://junit.org/</a> for more information.</p>
<p>Build time tests are tests which run during the compilation phase of
your project. Build time tests provide a way for a developer to quickly
test (in isolation) the logic which belongs to a given project to verify
it is behaving as desired.</p>
<p>Below we will provide the basics of JUnit tests and how you can use them,
along with recommendations of how to write JUnit tests.</p>
<p>Additionally JUnit integrates nicely with the Eclipse and Idea frameworks
to provide launching and debugging unit tests from within the IDE framework.</p>
</section>
<section id="qualities-of-a-good-unit-test">
<h2>Qualities of a Good Unit Test<a class="headerlink" href="#qualities-of-a-good-unit-test" title="Link to this heading">¶</a></h2>
<p>A good unit test will:</p>
<ol class="arabic simple">
<li><p>Run quickly</p>
<ul class="simple">
<li><p>No sleeps or thread blocking if you can avoid it</p></li>
</ul>
</li>
<li><p>Run against the public API’s of a class (think interfaces!)</p></li>
<li><p>Test a “single” unit of work</p>
<ul class="simple">
<li><p>Unit tests generally test an isolated piece of functionality.
Integration tests are used to test the interaction between two
pieces of logic.</p></li>
<li><p>You can have multiple tests in a single test class, each testing a
different piece of functionality… more on that later.</p></li>
</ul>
</li>
<li><p>Contain assertions which validate the functionality</p></li>
</ol>
<p>To help get an idea if you tested all of your code you can use Code
Coverage tools to review your code coverage. One such tools is <a class="reference external" href="https://www.eclemma.org">EclEmma</a>
for eclipse which provides a mechanism to visually report the code coverage of
or more unit tests.</p>
</section>
<section id="running-a-junit-test">
<h2>Running a JUnit Test<a class="headerlink" href="#running-a-junit-test" title="Link to this heading">¶</a></h2>
<section id="command-line">
<h3>Command Line<a class="headerlink" href="#command-line" title="Link to this heading">¶</a></h3>
<p>To run a JUnit tests via the command line you only need to run:</p>
<p><code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">test</span></code></p>
<p>However, that only runs the tests, it doesn’t recompile them. In general
running</p>
<p><code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">clean</span> <span class="pre">install</span></code></p>
<p>is the best way as it rebuilds your bundle and then executes any JUnit
tests.</p>
</section>
<section id="eclipse">
<h3>Eclipse<a class="headerlink" href="#eclipse" title="Link to this heading">¶</a></h3>
<p>To run a JUnit tests via Eclipse, you can select the method, class,
package, or source folder, right click it, and select <em>“Run As” -&gt; “JUnit
Test”</em>. The JUnit tests will now execute and an overview can bee seen in
the JUnit view.</p>
</section>
</section>
<section id="debugging-a-test">
<h2>Debugging a Test<a class="headerlink" href="#debugging-a-test" title="Link to this heading">¶</a></h2>
<p>To debug a JUnit test via Eclipse, simply place your breakpoints as
expected, and then right click the test method and choose <em>“Debug As” -&gt;
“JUnit Test”</em>. The test will start and will pause when the breakpoint is
hit.</p>
</section>
<section id="example-implementation">
<h2>Example Implementation<a class="headerlink" href="#example-implementation" title="Link to this heading">¶</a></h2>
<p>Below we provide an example of how you can implement a JUnit test in
your code.</p>
<section id="test-name-and-package">
<h3>Test Name and Package<a class="headerlink" href="#test-name-and-package" title="Link to this heading">¶</a></h3>
<p>A few things to keep in mind when creating a JUnit test class:</p>
<ul class="simple">
<li><p>Your JUnit test <strong>MUST</strong> start with, or end with the word <strong>Test</strong>.
This is a keyword that the command line maven test invocation
strategy looks for when deciding if it should inspect a class for
JUnit annotations. If you class does not start or end with the word
test it will NOT run via the maven command line and therefore will
not run during builds either (however you will be able to invoke it
via eclipse).</p></li>
<li><p>It is best practice to place the JUnit test in the same package as
the class that you are testing. This makes it easier to find the
corresponding tests as well provides access to default members or
methods if needed.</p></li>
<li><p>You should try and name your class similar to the class under test
(often just appending to the end the word “test” or if you have
multiple test files, then appending a description of each file to the
end of the file).</p></li>
</ul>
</section>
<section id="adding-junit-to-your-maven-project">
<h3>Adding JUnit to your Maven Project<a class="headerlink" href="#adding-junit-to-your-maven-project" title="Link to this heading">¶</a></h3>
<p>To add the JUnit dependency to your maven project you simply add this
dependency into the dependencies section of your pom file.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
<span class="w">  </span><span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
<span class="w">  </span><span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>4.8.1<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can exclude the scope and version tags assuming a parent
project has defined the dependency in the dependency management
section.</p>
</div>
</section>
<section id="creating-your-test-class-annotations">
<h3>Creating your Test Class - Annotations<a class="headerlink" href="#creating-your-test-class-annotations" title="Link to this heading">¶</a></h3>
<p>A JUnit test class is simply a java class. We use java annotations to
mark the methods which set up the test and those which define actually
tests.</p>
<p>In order to write a good unit test it is important to understand how
JUnit executes your tests. JUnit will instantiate a new instance of your
test class for each test method (&#64;Test) that is defined in your test class.
This means that non static class variables will be unique per instance of test
method.
This is done to ensure that one test method doesn’t unintentionally interfere
with another test in the same class.
Unfortunately this also means that you need to initialize common intelligence
every time which may lead to longer running tests (or messy code)
which is something we want to avoid.
JUnit makes this easier with a few additional annotations.
Below is the flow of a JUnit test test:</p>
<ol class="arabic simple">
<li><p><strong>&#64;BeforeClass</strong> - This annotation can appear once in a test class on
a public <em>static</em> method which takes no arguments. This provides a
way to initialize some test data for ALL test methods in your test
class. A BeforeClass method is intended to set up a static shared
resource for all methods to use, such as a database connection or in
our case a repository of yang model definitions (for example).
In this method you can initialize static class variables for later use.</p></li>
<li><p><em>A new instance of your test class is instantiated</em> - A new instance of your
test class is not instantiated so each method can have its own sandbox.</p></li>
<li><p><strong>&#64;Before</strong> - This annotation can appear once in a test class on a public
method which takes no arguments.
This method is called before EVERY test method.
It purpose to to provide a location for common initialization logic that each
test method requires, such as instantiating the class under test and
performing some generic set up.
During this step you can class level variables for use in your test methods.
Note, you do NOT have to worry about synchronization with the class level
variables initialized here, because each test method has its own copy of the
variables.
Of course if your tests deals with concurrency, or you are modifying a static
resource (not recommended) you may still need to deal with concurrency.</p></li>
<li><p><strong>&#64;Test</strong> - See above. At this point one of the &#64;Test annotated methods is
executed.</p></li>
<li><p><strong>&#64;After</strong> - The method with this annotation is executed after the
&#64;Test annotated method executes. This method is executed regardless
of the passing or failing of the JUnit test and provides an
opportunity to clean up after your test, such as deleting temporary
files or deleting records from a database.</p></li>
<li><p><em>At this point the testing framework will loop back to the &#64;Before on
a new test class instance to execute the next test method.</em></p></li>
<li><p><strong>&#64;AfterClass</strong> - this annotation placed on a static method is used
to clean up the initialization performed in the <code class="docutils literal notranslate"><span class="pre">&#64;BeforeClass</span></code> method.
It is executed once when all &#64;Test methods have been executed.</p></li>
</ol>
<p>Here is a sample JUnit test class that illustrates the ordering:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nn">org.opendaylight.controller.sal.restconf.impl.cnsn.to.json.test</span><span class="p">;</span>

<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.After</span><span class="p">;</span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.AfterClass</span><span class="p">;</span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Before</span><span class="p">;</span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.BeforeClass</span><span class="p">;</span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Test</span><span class="p">;</span>

<span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Temp</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@BeforeClass</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">staticInit</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Static Init&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Before</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testInit</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Test Init - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testOne</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Test One - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testTwo</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Test Two - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@After</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testCleanUp</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Test Clean Up - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@AfterClass</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">staticCleanUp</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Static Clean Up&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>If you execute this through the test framework
you would get output similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Static</span> <span class="n">Init</span>
<span class="n">Test</span> <span class="n">Init</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7476</span><span class="n">a6d9</span>
<span class="n">Test</span> <span class="n">One</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7476</span><span class="n">a6d9</span>
<span class="n">Test</span> <span class="n">Clean</span> <span class="n">Up</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7476</span><span class="n">a6d9</span>
<span class="n">Test</span> <span class="n">Init</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7260</span><span class="n">c384</span>
<span class="n">Test</span> <span class="n">Two</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7260</span><span class="n">c384</span>
<span class="n">Test</span> <span class="n">Clean</span> <span class="n">Up</span> <span class="o">-</span> <span class="n">org</span><span class="o">.</span><span class="n">opendaylight</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">sal</span><span class="o">.</span><span class="n">restconf</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">cnsn</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">Temp</span><span class="o">@</span><span class="mi">7260</span><span class="n">c384</span>
<span class="n">Static</span> <span class="n">Clean</span> <span class="n">Up</span>
</pre></div>
</div>
<p>Notice that the object address is different for the two initialization calls,
indicating that each test method did indeed receive its own object.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important to not rely on the order of execution of the test methods
when possible.
JUnit can be configured to execute in parallel test methods from different
classes but also inside the same class.</p>
<p><em>More details on parallel execution experimental support in Junit5 can be
found at this URL:</em></p>
<p><em>https://junit.org/junit5/docs/current/user-guide/index.html#writing-tests-parallel-execution</em></p>
</div>
<p>Now that you have a shell for your test framework, its important to discuss
how you indicate failures or passes in your JUnit tests.
For that we need to discuss about assertions.</p>
</section>
<section id="validating-your-tests-assertions">
<h3>Validating Your Tests - Assertions<a class="headerlink" href="#validating-your-tests-assertions" title="Link to this heading">¶</a></h3>
<p>In order to have a complete unit test it is important to have quality
assertions in your tests which actually validate that the behavior
observed is the behavior that you wanted.</p>
<ul class="simple">
<li><p><strong>Passing a JUnit Test</strong> - A JUnit test is considered to have passed
if the method executes and returns without throwing an exception.</p></li>
<li><p><strong>Failing a JUnit Test</strong> - A JUnit test will be considered failed if
an exception is thrown from it. There are a number of libraries that
have been created to make this easier, most notable the Assert library.</p></li>
</ul>
<p>The Assert library is closely tied to the JUnit library and provides
methods to make it easy to validate that the data return is non null,
equals another object etc. For example, if you want to assert that two
objects are equal, you can use the <code class="docutils literal notranslate"><span class="pre">eassertEquals(</span> <span class="pre">...</span> <span class="pre">)</span></code> method.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(){</span>
<span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="n">expectedObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="n">actualObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Error message if not equal&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">expectedObj</span><span class="p">,</span><span class="w"> </span><span class="n">actualObj</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is a very common pattern for the assert methods. You can provide a
string which provides a more descriptive error if things are not equal.
Additionally, the Assertion framework will also to string the objects
for comparison if things don’t match to provide further information.
Check out the Assert class for all of the other combinations:
<a class="reference external" href="https://junit.org/junit4/javadoc/latest/org/junit/Assert.html">https://junit.org/junit4/javadoc/latest/org/junit/Assert.html</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is a good idea to use the most appropriate method for your assertions.
For example you can assert equality by simply doing
<code class="docutils literal notranslate"><span class="pre">assertTrue(</span> <span class="pre">expectedObj.equals(</span> <span class="pre">actualObj</span> <span class="pre">)</span> <span class="pre">)</span></code>.
However the assert methods will do additional things like null checks,
and printing out more detailed information on the error
if the assertion does not pass.
So in this case, using <code class="docutils literal notranslate"><span class="pre">assertEquals</span></code> is better as it would null check and
print the values of the expected and actual objects for you automatically,
making the act of asserting really easy!.</p>
</div>
</section>
<section id="concurrency-in-unit-test">
<h3>Concurrency in Unit test<a class="headerlink" href="#concurrency-in-unit-test" title="Link to this heading">¶</a></h3>
<p>In general, it is easier to avoid having multiple threads in your unit tests
for a few reasons:</p>
<ol class="arabic simple">
<li><p>JUnit will only fail if an exception is thrown in the primary thread
which it is executing your test from - exceptions thrown on other
threads will not cause the test to fail!</p></li>
<li><p>Tests will slow down when other threads get spawned and you will
start competing for system resources.</p></li>
<li><p>You have to deal with all of the other concurrency issues in your
test that you do else where (waiting for threads, synchronizing
objects etc) which makes the test harder to read.</p></li>
</ol>
<p>If you do find that you need to deal with multiple threads in your test
then you will need to take great care to make sure you are handling
uncaught exceptions etc. If the class you are testing uses thread pools
it is a good idea to refactor your test to pass in a ThreadPool instead
of instantiate your own thread pool. If you do that, then you can use
one of the following options to avoid multiple threads:</p>
<ul class="simple">
<li><p>Pass in a thread pool executor that executes the <code class="docutils literal notranslate"><span class="pre">runnable</span></code> / <code class="docutils literal notranslate"><span class="pre">callable</span></code>
on the same thread</p></li>
<li><p>Capture the <code class="docutils literal notranslate"><span class="pre">runnables</span></code> in a mock executer and then execute the run /
call method at a later point.</p></li>
</ul>
<p>[TODO - need to provide more examples for the above two cases]</p>
</section>
<section id="mocking">
<h3>Mocking<a class="headerlink" href="#mocking" title="Link to this heading">¶</a></h3>
<p>There are a number of frameworks out there which allow you to mock up
objects in your Unit tests to simulate behavior.
Most of these frameworks take advantage of good modular OO design
(i.e. think interfaces, setters, getters etc).
Some example mocking frameworks are:</p>
<ul class="simple">
<li><p>Mockito - <a class="reference external" href="https://github.com/mockito/mockito">https://github.com/mockito/mockito</a> - <strong>Note: Used in
controller in a number of places</strong></p></li>
</ul>
<p>Please refer to these sites for more details. If you have questions
please reach out the mailing lists with questions - if there is enough
interest we will develop more detailed best practices around mocking.</p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/developer-guides/tests/junit.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2016-2026, OpenDaylight Project.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>